<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veriface Attendance</title>
    
    <script async src="https://docs.opencv.org/4.x/opencv.js" onload="onOpenCvReady();"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100">

    <header><h1>Veriface</h1></header>

    <nav>
        <button class="tab-btn active" onclick="showTab('capture')">Capture</button>
        <button class="tab-btn" onclick="showTab('absentees')">Student-List</button>
        <button class="tab-btn" onclick="showTab('insights')">Insights</button>
    </nav>

    <div class="container">
        <div id="capture" class="tab-content active">
            <div class="bg-white text-center">
                <h2>Capture Attendance</h2>
                <p class="text-gray-600 mb-6">Click the camera to take one or more photos of the class.</p>
                <button id="open-camera-btn" class="mx-auto transition hover:scale-105">
                    <svg class="w-24 h-24 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z" /><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z" /></svg>
                </button>
                <div id="thumbnail-gallery"></div>
                <button id="upload-batch-btn" class="mt-4 px-8 py-3 bg-green-600 text-white font-bold rounded-lg shadow-md hover:bg-green-700 transition disabled:bg-gray-400" disabled>
                    Upload Attendance
                </button>
                <p id="message-box" class="mt-3 text-center h-5 font-semibold"></p>
            </div>
        </div>

        <div id="absentees" class="tab-content">
            <div class="bg-white">
                <h2>Student Details</h2>
                <div class="table-container">
                    <table id="students-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Total Hours</th>
                                <th>Present Hours</th>
                                <th>Attendance %</th>
                                <th>Contact</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="insights" class="tab-content">
            <div class="bg-white">
                <h2>Attendance Overview</h2>
                <div class="w-full max-w-md mx-auto">
                    <canvas id="attendancePieChart"></canvas>
                </div>
            </div>
        </div>
    </div>
    
    <div id="camera-modal">
        <div id="modal-video-container">
            <video id="video" playsinline></video>
            <canvas id="canvas-output"></canvas>
        </div>
        <button id="shutter-btn"></button>
        <button id="close-camera-btn">&times;</button>
    </div>

    <canvas id="capture-canvas" class="hidden"></canvas>

    <script src="script.js"></script>
</body>
</html>